
<ng-container *transloco="let t, read: 'contracts.info'">
  <mat-card-actions [align]="'end'">
    <button mat-button color="primary" routerLink="./set-liquidation">
      <span>Add Liquidation</span>
      &nbsp;
      <mat-icon>add_box</mat-icon>
    </button>
  </mat-card-actions>

  <ol class="collection">
    <mat-card class="header-card">
      <li class="row">
        <div class="cell">{{ t('tickets') | titlecase }}</div>
        <div class="cell">{{ t('Date') | titlecase }}</div>
        <div class="cell">{{ t('status') | titlecase }}</div>
        <div class="cell options"></div>
        <div class="cell options"></div>
      </li>
    </mat-card>
    <ng-container *ngIf="liquidations.length!==0 else noItems">
      <mat-card class="body-card" *ngFor="let item of liquidations; let index = index">
        <li class="row">
          <div class="cell ticket-ids">
            <i *ngFor="let ref of item.ticketRefs | ticketIds; let last = last">
              <span>{{ ref | async }}</span>
              <span *ngIf="!last && (ref | async)">,</span>
            </i>
          </div>
          <div class="cell">{{ item.date | date }}</div>
          <div class="cell status">
            <div class="status-text" [class]="item.status">{{ item.status }}</div>
          </div>
          <div class="cell options">
            <button mat-icon-button [matMenuTriggerFor]="pdfMenu">
              <mat-icon [color]="item.proofOfPaymentLinks?.length > 0 ? 'primary' : 'accent'">cloud_upload</mat-icon>
            </button>
            <mat-menu #pdfMenu="matMenu">
              <button mat-menu-item>
                <mat-icon color="primary">insert_drive_file</mat-icon>
                <span>Proof of Payment</span>
              </button>
              <button mat-menu-item>
                <mat-icon color="primary">file_copy</mat-icon>
                <span>Supplemental Documents</span>
              </button>
            </mat-menu>
          </div>
          <div class="cell options">
            <button mat-icon-button [matMenuTriggerFor]="menu">
              <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
              <button mat-menu-item>
                <mat-icon color="primary">open_in_new</mat-icon>
                <span>View Document</span>
              </button>
              <button mat-menu-item>
                <mat-icon color="primary">edit</mat-icon>
                <span>Edit Document</span>
              </button>
              <button mat-menu-item (click)="deleteLiquidation(index)">
                <mat-icon color="warn">delete_forever</mat-icon>
                <span>Delete Document</span>
              </button>
            </mat-menu>
          </div>
        </li>
      </mat-card>
    </ng-container>
    <ng-template #noItems>
      <div class="no-items"><i>No Items to Display</i></div>
    </ng-template>
  </ol>
</ng-container>