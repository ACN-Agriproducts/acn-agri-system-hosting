<app-header-toolbar titulo="New Contract"></app-header-toolbar>

<ion-content>
  <ion-card>
    <ion-card-header>
      <ion-card-subtitle>
        New Contract
      </ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>
      <form [formGroup]="contractForm" (ngSubmit)="submitForm()">
        <ion-list>
          <ion-radio-group class="ion-justify-content-start" formControlName="contractType">
            <ion-row>
              <ion-col>
                <ion-item lines="none">
                  <ion-label>Puchase Contract</ion-label>
                  <ion-radio slot="start" value="purchaseContracts"></ion-radio>
                </ion-item>
              </ion-col>
              <ion-col>
                <ion-item lines="none">
                  <ion-label>Sales Contract</ion-label>
                  <ion-radio slot="start" value="salesContracts"></ion-radio>
                </ion-item>
              </ion-col>
            </ion-row>
          </ion-radio-group>
          <ion-item *ngIf="clientsReady" lines="none">
            <ion-label size="3">Client</ion-label>
            <ion-select placeholder="client" formControlName='client' [compareWith]="compareWithClient">
              <div *ngFor="let contact of contactList">
                <ion-select-option  *ngIf="contact.isClient" [value]="contact">{{contact.name}}</ion-select-option>
              </div>
            </ion-select>
          </ion-item>
          <ion-item class="content-item" lines="none">
            <ion-input type="number" placeholder="1000" formControlName="quantity"></ion-input>
            <ion-select value="lbs" formControlName="quantityUnits" placeholder="bushels">
              <ion-select-option value="lbs">lbs</ion-select-option>
              <ion-select-option value="bushels">bushels</ion-select-option>
              <ion-select-option value="trucks">trucks</ion-select-option>
              <ion-select-option value="cwt">cwt</ion-select-option>
            </ion-select>
            of
          </ion-item>
          <ion-item lines="none">
            <ion-select *ngIf="productsReady" [compareWith]="compareWithProduct" placeholder="product" formControlName="product">
              <ion-select-option *ngFor="let product of productsList" [value]="product">{{product.name}}</ion-select-option>
            </ion-select>
            at $
            <ion-input type="number" placeholder="5.00" formControlName="price"></ion-input>
            per 
            <ion-select value="bushel" formControlName="priceUnit" placeholder="bushels">
              <ion-select-option value="cwt">cwt</ion-select-option>
              <ion-select-option value="bushel">bushel</ion-select-option>
            </ion-select>
          </ion-item>
          <ion-item lines="none">
            <ion-label>Current Market Price: $</ion-label>
            <ion-input type=number placeholder="5.00" formControlName="marketPrice"></ion-input>
          </ion-item>
          <ion-item lines="none">
            <ion-label>Grade: </ion-label>
            <ion-input type="number" placeholder="2" formControlName="grade"></ion-input>
            <ion-label>Aflatoxin: </ion-label>
            <ion-input type="number" placeholder="20" formControlName="aflatoxin"></ion-input>
          </ion-item>
          <ion-item lines="none">
            <ion-label>Delivery dates</ion-label>
            <ion-datetime displayFormat="MM DD YYYY" placeholder="01/01/1990" formControlName="deliveryDateStart"></ion-datetime>
            <ion-label>to</ion-label>
            <ion-datetime displayFormat="MM DD YYYY" placeholder="01/01/2040" formControlName="deliveryDateEnd"></ion-datetime>
          </ion-item>
          <div formGroupName="paymentTerms">
            <ion-item lines="none">
              <ion-label>Scale: Destination</ion-label>
              <ion-toggle formControlName="origin"></ion-toggle>
              <ion-label>Origin</ion-label>
            </ion-item>
            <ion-item lines="none">
              <ion-label>Payment: Before</ion-label>
              <ion-toggle formControlName="before"></ion-toggle>
              <ion-label>After</ion-label>
            </ion-item>
            <ion-item lines="none">
              <ion-label>{{contractForm.controls['contractType'].value == '' || contractForm.controls['contractType'].value == 'purchaseContracts'? "Send" : "Receive"}} payments every </ion-label>
              <ion-input type="number" formControlName="amount" placeholder="5"></ion-input>
              <ion-select formControlName="measurement" placeholder="trucks">
                <ion-select-option value="lbs">lbs</ion-select-option>
                <ion-select-option value="trucks">trucks</ion-select-option>
                <ion-select-option value="bushels">bushels</ion-select-option>
              </ion-select>
            </ion-item>
          </div>
          <ion-button type="submit" [disabled]="contractForm.invalid">Submit</ion-button>
        </ion-list>
      </form>
    </ion-card-content>
  </ion-card>

  <!-- <ion-card>
    <ion-card-content>
      <ion-grid>
        <ion-row>
          <ion-col size="12">
            <mat-radio-group class="contract-type-radio-group">
              <mat-radio-button>Sale Contract</mat-radio-button>
              <mat-radio-button>Purchase Contract</mat-radio-button>
            </mat-radio-group>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col size="2">
            <span matLine class="mat-text">Client: </span>
          </ion-col>
          <ion-col size="4">
            <mat-form-field>
              <mat-label>Client</mat-label>
              <mat-select>
                <mat-option></mat-option>
              </mat-select>
            </mat-form-field>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="4">
            <mat-form-field>
              <mat-label>Product Quantity</mat-label>
              <input matInput>
            </mat-form-field>
          </ion-col>
          <ion-col size="4">
            <mat-form-field>
              <mat-label>Units</mat-label>
              <mat-select placeholder='bushels'></mat-select>
            </mat-form-field>
          </ion-col>
          <ion-col size="2">
            <span matLine class="mat-text">of</span>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="3">
            <mat-form-field>
              <mat-label>Product</mat-label>
              <mat-select></mat-select>
            </mat-form-field>
          </ion-col>
          <ion-col size="1">
            <span class="mat-text">at</span>
          </ion-col>
          <ion-col size="3">
            <mat-form-field>
              <mat-label>Price</mat-label>
              <span matPrefix>$</span>
              <input matInput>
            </mat-form-field>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card> -->
</ion-content>
