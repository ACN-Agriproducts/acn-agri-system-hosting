<app-header-toolbar titulo="Prices"></app-header-toolbar>


<ion-content class="ion-padding">
  <div class="table-space" *ngFor="let priceType of pricesTable | keyvalue">
    <div class="content-subtitle_small-inventory">
      <h4><span>Products</span></h4>
    </div>
    <button
      mat-button
      color="primary"
      (click)="addNewColumn(priceType.key)"
      >+ Add Column
    </button>
    <button 
      mat-button 
      color="primary" 
      (click)="addNewRow(priceType.key)"
      >+ Add Row
    </button>

    <div class="horizontal-scroll">
      <table class="prices-table">
        <tr class="prices-table-row">
          <th class="prices-table-cell prices-table-header-cell">
            Name
          </th>
          <th class="prices-table-cell prices-table-header-cell" *ngFor="let location of priceType.value.locationNames; let first = first">
            {{location}}
            <button mat-icon-button>
              <mat-icon>edit</mat-icon>
            </button>
          </th>
        </tr>
        <tr class="prices-table-row" *ngFor="let productType of priceType.value.productNames">
          <td class="prices-table-cell prices-table-type">
            {{productType}}
          </td>
          <td class="prices-table-cell" *ngFor="let location of priceType.value.locationNames; let first = first">
            <mat-form-field appearance="outline" [style.width.px]="150">
              <input
                matInput
                [(ngModel)]="priceType.value.prices
                  [priceType.value.productNames.indexOf(productType)]
                  [priceType.value.locationNames.indexOf(location)]
              ">
            </mat-form-field>
          </td>
        </tr>
      </table>
    </div>
  </div>
</ion-content>
